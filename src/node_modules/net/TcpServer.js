"use strict";

var net = require("net");

module.exports = TcpServer;

function TcpServer(connectListener){
	var server = new net.Server();
	server.on("connection", connectListener);
	server.on("error", __onServerError);
	this.server = server;
}

var prototype = TcpServer.prototype;

prototype.listen = function(port, host){
	this.server.listen(port, host);
}

function __onServerError(err){
	switch(err.code){
		case "EADDRINUSE":
			console.error('Address in use, retrying...');
			break;
		default:
			console.error("socket server error!", err);
	}
}